---
layout: default
---

<div id="preloader" style="text-align: center; padding: 100px">
     <img src="img/ajax-loader.gif" style="vertical-align:top" /> &nbsp;
     <span class="txt">ucitavanje podataka...</span>
</div>

<div class="row">
  <script type="text/javascript">
    $(function() {
      var $tooltip = $('<div class="tooltip">Tooltip</div>');
      $('.bubbletree').append($tooltip);
      $tooltip.hide();
			
      var dataLoaded = function(data) {
        $('#preloader').remove();
        window.bubbleTree = new BubbleTree({
          data: data,
          container: '#bubbletree',
          bubbleType: 'icon',
          bubbleStyles: {
            'Cofog1':  BubbleTree.Styles.Cofog1,
            'Cofog2':  BubbleTree.Styles.Cofog2,
            'Title': BubbleTree.Styles.Title
          },
          clearColors: false, // remove all colors coming from OpenSpending API
          rootPath: 'icons/',
          tooltip: {
            qtip: true,
            delay: 800,
            content: function(node) {
              return [node.label, '<div class="desc">'+(node.description ? node.description : 'No description given')+'</div><div class="amount">'+node.famount+' KM</div>'];
            }
          }
        });
      };
			
      // call openspending api for data
      new OpenSpending.Aggregator({
        apiUrl: 'http://openspending.org/api',
        dataset: 'ba-cantons',
        rootNodeLabel: 'Total',
        drilldowns: ['Cofog1', 'Title'],
        cuts: ['Canton.label:{{page.label}}'],
        callback: dataLoaded
      });
    });
  </script>

  <div class="bubbletree-wrapper">
    <div id="bubbletree" class="bubbletree"></div>
  </div>
</div>
{% include scripttags.html %}
